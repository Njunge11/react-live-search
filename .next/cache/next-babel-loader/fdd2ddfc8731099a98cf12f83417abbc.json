{"ast":null,"code":"import axios from \"axios\";\nlet source;\n\nconst search = async query => {\n  if (source) {\n    source.cancel();\n  }\n\n  const CancelToken = axios.CancelToken;\n  source = CancelToken.source();\n\n  try {\n    const res = await axios(query, {\n      cancelToken: cancel.token\n    });\n    const result = res.data.results;\n    return result;\n  } catch (error) {\n    if (axios.isCancel) {\n      console.log(\"Request cancelled \", error.message);\n    } else {\n      console.log(\"Something went wrong: \", error.message);\n    }\n  }\n}; // const makeRequestCreator = () => {\n//   let cancel;\n//   return async query => {\n//     if (cancel) {\n//       // Cancel the previous request before making a new request\n//       cancel.cancel();\n//     }\n//     // Create a new CancelToken\n//     cancel = axios.CancelToken.source();\n//     try {\n//       if (resources[query]) {\n//         // Return result if it exists\n//         return resources[query];\n//       }\n//       const res = await axios(query, { cancelToken: cancel.token });\n//       const result = res.data.results;\n//       // Store response\n//       resources[query] = result;\n//       return result;\n//     } catch (error) {\n//       if (axios.isCancel(error)) {\n//         // Handle if request was cancelled\n//         console.log(\"Request canceled\", error.message);\n//       } else {\n//         // Handle usual errors\n//         console.log(\"Something went wrong: \", error.message);\n//       }\n//     }\n//   };\n// };\n// export const search = makeRequestCreator();\n\n\nexport default search;","map":{"version":3,"sources":["/home/njunge/Projects/front-end/react-live-search/src/utils.js"],"names":["axios","source","search","query","cancel","CancelToken","res","cancelToken","token","result","data","results","error","isCancel","console","log","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,IAAIC,MAAJ;;AACA,MAAMC,MAAM,GAAG,MAAMC,KAAN,IAAe;AAC5B,MAAIF,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACG,MAAP;AACD;;AACD,QAAMC,WAAW,GAAGL,KAAK,CAACK,WAA1B;AACAJ,EAAAA,MAAM,GAAGI,WAAW,CAACJ,MAAZ,EAAT;;AACA,MAAI;AACF,UAAMK,GAAG,GAAG,MAAMN,KAAK,CAACG,KAAD,EAAQ;AAAEI,MAAAA,WAAW,EAAEH,MAAM,CAACI;AAAtB,KAAR,CAAvB;AACA,UAAMC,MAAM,GAAGH,GAAG,CAACI,IAAJ,CAASC,OAAxB;AACA,WAAOF,MAAP;AACD,GAJD,CAIE,OAAOG,KAAP,EAAc;AACd,QAAIZ,KAAK,CAACa,QAAV,EAAoB;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCH,KAAK,CAACI,OAAxC;AACD,KAFD,MAEO;AACLF,MAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCH,KAAK,CAACI,OAA5C;AACD;AACF;AACF,CAjBD,C,CAmBA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA,eAAed,MAAf","sourcesContent":["import axios from \"axios\";\nlet source;\nconst search = async query => {\n  if (source) {\n    source.cancel();\n  }\n  const CancelToken = axios.CancelToken;\n  source = CancelToken.source();\n  try {\n    const res = await axios(query, { cancelToken: cancel.token });\n    const result = res.data.results;\n    return result;\n  } catch (error) {\n    if (axios.isCancel) {\n      console.log(\"Request cancelled \", error.message);\n    } else {\n      console.log(\"Something went wrong: \", error.message);\n    }\n  }\n};\n\n// const makeRequestCreator = () => {\n//   let cancel;\n\n//   return async query => {\n//     if (cancel) {\n//       // Cancel the previous request before making a new request\n//       cancel.cancel();\n//     }\n//     // Create a new CancelToken\n//     cancel = axios.CancelToken.source();\n//     try {\n//       if (resources[query]) {\n//         // Return result if it exists\n//         return resources[query];\n//       }\n//       const res = await axios(query, { cancelToken: cancel.token });\n\n//       const result = res.data.results;\n//       // Store response\n//       resources[query] = result;\n\n//       return result;\n//     } catch (error) {\n//       if (axios.isCancel(error)) {\n//         // Handle if request was cancelled\n//         console.log(\"Request canceled\", error.message);\n//       } else {\n//         // Handle usual errors\n//         console.log(\"Something went wrong: \", error.message);\n//       }\n//     }\n//   };\n// };\n\n// export const search = makeRequestCreator();\nexport default search;\n"]},"metadata":{},"sourceType":"module"}